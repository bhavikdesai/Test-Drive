{"status":{},"contains_secrets":false,"product_version":"2.9.1","spec":{"description":"* [Jenkins](http:\/\/@@{Jenkins_Master.address}@@:8080)","resources":{"client_attrs":{"None":{"y":140,"x":300},"93550528-e5ca-494a-9459-7a2cd4f34d76":{"y":-63,"x":-111},"f9178d3c-99a2-4f08-b042-7fc176315d38":{"y":-63,"x":-111},"63329539-ee42-4c12-9b62-b7fcae839d49":{"y":-68,"x":128},"401cafee-a13d-4279-bcd6-beb3b2b92f31":{"y":-68,"x":128},"87f3489b-1339-43e8-bc3f-d388b603d8f9":{"y":-68,"x":128},"93c1c98a-d8ee-455f-ba22-510c2662f96f":{"y":-68,"x":128},"ffdda4d4_deployment":{"y":-68,"x":128},"487f0f9a_deployment":{"y":-63,"x":-111},"30fbb947-7392-4acb-899a-12ada8fa89fe":{"y":-63,"x":-111},"16e99341-f3cd-44f4-9f80-cdbc91ca4caa":{"y":-63,"x":-111}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"InstallPlugins"},{"kind":"app_task","name":"GetAuthPassword"}],"name":"6867bf21_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"InstallPlugins"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"GetAuthPassword"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"InstallPlugins","attrs":{"script":"#!\/bin\/bash\nset -ex\n\n#Install Basic plugins\nsudo yum -y install unzip\nsudo curl -o batch-install-jenkins-plugins.sh https:\/\/gist.githubusercontent.com\/micw\/e80d739c6099078ce0f3\/raw\/33a21226b9938382c1a6aa68bc71105a774b374b\/install_jenkins_plugin.sh\nsudo chmod +x batch-install-jenkins-plugins.sh\necho 'credentials-binding\nwindows-slaves\nssh-credentials \nssh-slaves\ncredentials\nplain-credentials\ncredentials-binding\nauthentication-tokens\nnutanix-calm\npam-auth\nscript-security\ncloudbees-folder\ncloudbees-credentials' | sudo tee plugins\n\nif [[ \"@@{INSTALL_BLUEOCEAN}@@\" == \"yes\" ]];then\n  echo 'blueocean' | sudo tee -a plugins\nfi\nsudo systemctl stop jenkins\nsudo mkdir -p \/var\/lib\/jenkins\/plugins\n#sudo .\/batch-install-jenkins-plugins.sh -p plugins -d \/var\/lib\/jenkins\/plugins\nsudo .\/batch-install-jenkins-plugins.sh $(echo $(cat plugins))\nsudo systemctl start jenkins \nsleep 60","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"GetAuthPassword","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\necho \"authpwd=\"$(sudo cat \/var\/lib\/jenkins\/secrets\/initialAdminPassword)","eval_variables":["authpwd"],"eval_scope":"local","type":"","script_type":"sh"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"649ebb9f_runbook","main_task_local_reference":{"kind":"app_task","name":"6867bf21_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b6f75d2f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"41524ac0_runbook","main_task_local_reference":{"kind":"app_task","name":"b6f75d2f_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"4828f091_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"d23157a1_runbook","main_task_local_reference":{"kind":"app_task","name":"4828f091_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9736c6d3_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4b4d2d04_runbook","main_task_local_reference":{"kind":"app_task","name":"9736c6d3_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ff4f877b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"0a872297_runbook","main_task_local_reference":{"kind":"app_task","name":"ff4f877b_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for deleting an application. Does not delete created VMs","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"efa70809_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b64cd6dc_runbook","main_task_local_reference":{"kind":"app_task","name":"efa70809_dag"},"variable_list":[]},"name":"action_soft_delete"}],"depends_on_list":[],"name":"Jenkins_Master","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"authpwd","value":"","label":"","attrs":{"type":""},"is_hidden":false}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"InstallJenkinsCLI"},{"kind":"app_task","name":"CreateCredAndNode"}],"name":"e07d737d_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"InstallJenkinsCLI"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"CreateCredAndNode"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"InstallJenkinsCLI","attrs":{"script":"#!\/bin\/bash\n\n#Download jenkins-cli\nsudo yum -y install wget\nsudo wget http:\/\/@@{Jenkins_Master.address}@@:8080\/jnlpJars\/jenkins-cli.jar\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"CreateCredAndNode","attrs":{"script":"#!\/bin\/bash\n\n\nJENKINS_URL=http:\/\/@@{Jenkins_Master.address}@@:8080\nNODE_NAME=@@{address}@@\nNODE_SLAVE_HOME='\/home\/centos'\nEXECUTORS=1\nSSH_PORT=22\nCRED_ID=Jenkins_Slave\nLABELS=build\nUSERID=admin\n\necho \"Creating credential\"\n\n#Create credential\necho '<com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey plugin=\"ssh-credentials@1.13\">\n  <scope>GLOBAL<\/scope>\n  <id>Jenkins_Slave<\/id>\n  <description><\/description>\n  <username>@@{CENTOS.username}@@<\/username>\n  <privateKeySource class=\"com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey$DirectEntryPrivateKeySource\">\n    <privateKey>\n    @@{CENTOS.secret}@@\n    <\/privateKey>\n  <\/privateKeySource>\n<\/com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey>' | sudo java -jar jenkins-cli.jar -s \"${JENKINS_URL}\"  -http -auth ${USERID}:@@{Jenkins_Master.authpwd}@@ create-credentials-by-xml system::system::jenkins _\n\necho \"Creating slave node\"\n\n#Create Slave Node\ncat <<EOF | sudo java -jar jenkins-cli.jar -s \"${JENKINS_URL}\" -http -auth ${USERID}:@@{Jenkins_Master.authpwd}@@ create-node ${NODE_NAME}\n<slave>\n  <name>${NODE_NAME}<\/name>\n  <description><\/description>\n  <remoteFS>${NODE_SLAVE_HOME}<\/remoteFS>\n  <numExecutors>${EXECUTORS}<\/numExecutors>\n  <mode>NORMAL<\/mode>\n  <retentionStrategy class=\"hudson.slaves.RetentionStrategy$Always\"\/>\n  <launcher class=\"hudson.plugins.sshslaves.SSHLauncher\" plugin=\"ssh-slaves@1.21\">\n    <host>${NODE_NAME}<\/host>\n    <port>${SSH_PORT}<\/port>\n    <credentialsId>${CRED_ID}<\/credentialsId>\n    <maxNumRetries>0<\/maxNumRetries>\n    <retryWaitTime>0<\/retryWaitTime>\n    <sshHostKeyVerificationStrategy class=\"hudson.plugins.sshslaves.verifiers.NonVerifyingKeyVerificationStrategy\"\/>\n  <\/launcher>\n  <label>${LABELS}<\/label>\n  <nodeProperties\/>\n<\/slave>\nEOF\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"93065e63_runbook","main_task_local_reference":{"kind":"app_task","name":"e07d737d_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"02ad1c31_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"28250c66_runbook","main_task_local_reference":{"kind":"app_task","name":"02ad1c31_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ca75bdb3_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9068219c_runbook","main_task_local_reference":{"kind":"app_task","name":"ca75bdb3_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7838aed7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"fa556cf2_runbook","main_task_local_reference":{"kind":"app_task","name":"7838aed7_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"01b88116_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"d304ebd2_runbook","main_task_local_reference":{"kind":"app_task","name":"01b88116_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for deleting an application. Does not delete created VMs","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Slave"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9c198900_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"8ab0b343_runbook","main_task_local_reference":{"kind":"app_task","name":"9c198900_dag"},"variable_list":[]},"name":"action_soft_delete"}],"depends_on_list":[{"kind":"app_service","name":"Jenkins_Master"}],"name":"Jenkins_Slave","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"JenkinsAHVMaster","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"categories":true,"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"boot_config":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"JenkinsMaster","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"db6576f8-f27a-47f3-85dc-c47071e227ca"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":1,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4df73670-985b-4cdd-a71f-888e67dae640","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"AHV_CENTOS_76","uuid":"2c753de2-9588-47d3-8068-9110e7e9aeec"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"JenkinsAHVSlave","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"categories":true,"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"boot_config":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"JenkinsSlave@@{calm_array_index}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"db6576f8-f27a-47f3-85dc-c47071e227ca"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":1,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4df73670-985b-4cdd-a71f-888e67dae640","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"AHV_CENTOS_76","uuid":"2c753de2-9588-47d3-8068-9110e7e9aeec"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS","editables":{"username":true,"secret":true}}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Jenkins_Master"}],"name":"JenkinsAHVMasterPkg","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVMasterPkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageInstallTask"}],"name":"5b445cb2_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVMasterPkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageInstallTask","state":"ACTIVE","attrs":{"script":"#!\/bin\/bash\nset -ex\n\nsudo yum install -y @@{CENTOS_PACKAGE}@@\nsudo yum update -y\nsudo yum install -y java-1.8.0-openjdk.x86_64\n\nsudo rpm --import http:\/\/pkg.jenkins-ci.org\/redhat-stable\/jenkins-ci.org.key\nsudo curl -o \/etc\/yum.repos.d\/jenkins.repo http:\/\/pkg.jenkins-ci.org\/redhat-stable\/jenkins.repo\nsudo yum install -y jenkins-@@{JENKINS_VERSION}@@\nsudo systemctl enable jenkins\nsudo systemctl start jenkins","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"2ced9004_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"5b445cb2_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVMasterPkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageUninstallTask"}],"name":"e915b53d_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVMasterPkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageUninstallTask","state":"ACTIVE","attrs":{"script":"#!\/bin\/bash\n\necho \"Uninstalling jenkins\"\n\nsudo systemctl stop jenkins\nsudo systemctl disable jenkins\nsudo yum -y remove jenkins-@@{JENKINS_VERSION}@@","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"cef65be2_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e915b53d_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Jenkins_Slave"}],"name":"JenkinsAHVSlavePkg","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVSlavePkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageInstallTask"}],"name":"e9524ac9_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVSlavePkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageInstallTask","state":"ACTIVE","attrs":{"script":"#!\/bin\/bash\nset -ex\n\nsudo yum install -y @@{CENTOS_PACKAGE}@@\nsudo yum update -y\nsudo yum install -y java-1.8.0-openjdk.x86_64\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"a6f6368b_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e9524ac9_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVSlavePkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageUninstallTask"}],"name":"160b382b_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"JenkinsAHVSlavePkg"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageUninstallTask","state":"ACTIVE","attrs":{"script":"#!\/bin\/bash\nset -ex\n\nsudo yum remove -y java-1.8.0-openjdk.x86_64\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"930c0460_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"160b382b_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"Centos image downloaded for Jenkins ","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"AHV_CENTOS_76","version":"","options":{"type":"","name":"CENTOS_76","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"https:\/\/storage.googleapis.com\/testdrive-templates\/library\/images\/CentOS-7-x86_64-1810.qcow2","version":{"product_version":"","type":"","product_name":""},"architecture":"X86_64","type":""},"description":""},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"487f0f9a_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"JenkinsAHVMasterPkg"}],"substrate_local_reference":{"kind":"app_substrate","name":"JenkinsAHVMaster"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"ffdda4d4_deployment","min_replicas":"3","default_replicas":"3","depends_on_list":[],"editables":{"min_replicas":true,"max_replicas":true},"published_service_local_reference_list":[],"max_replicas":"6","package_local_reference_list":[{"kind":"app_package","name":"JenkinsAHVSlavePkg"}],"substrate_local_reference":{"kind":"app_substrate","name":"JenkinsAHVSlave"},"variable_list":[],"description":""}],"description":"","action_list":[{"description":"This actions upgrades jenkins to latest version.","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Upgrade"}],"name":"cdb5a5af_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Jenkins_Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Upgrade","attrs":{"script":"#!\/bin\/bash\n\nsudo yum -y upgrade jenkins\nsudo service jenkins restart","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"80838bdc_runbook","main_task_local_reference":{"kind":"app_task","name":"cdb5a5af_dag"},"variable_list":[]},"name":"UpgradeJenkins"},{"description":"This action will scale out jenkins slaves by given scale out count","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOutSlaves"}],"name":"3eff5af2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"ffdda4d4_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleOutSlaves","attrs":{"scaling_count":"@@{SCALEOUT_COUNT}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"f96ab3d8_runbook","main_task_local_reference":{"kind":"app_task","name":"3eff5af2_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEOUT_COUNT","value":"2","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleOut"},{"description":"This action will scale in jenkins slaves by given scale in count","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleInSlaves"}],"name":"cbb5bcfe_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"ffdda4d4_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ScaleInSlaves","attrs":{"scaling_count":"@@{SCALEIN_COUNT}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"19f91eaa_runbook","main_task_local_reference":{"kind":"app_task","name":"cbb5bcfe_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEIN_COUNT","value":"2","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]},"name":"ScaleIn"}],"name":"Nutanix","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"JENKINS_VERSION","value":"2.150.1","label":"","attrs":{"type":""},"is_hidden":false},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"INSTALL_BLUEOCEAN","value":"no","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"CENTOS_PACKAGE","value":"epel-release","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"Jenkins"},"api_version":"3.0","metadata":{"last_update_time":"1584372984694998","kind":"blueprint","spec_version":2,"creation_time":"1584372719577854","categories":{"AppFamily":"DevOps"},"name":"Jenkins"}}